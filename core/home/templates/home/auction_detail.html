<!-- auction_detail.html -->
{% extends "base.html" %} {% load static %} {% block start %}
<div class="container-fluid p-0 m-0">
  <div class="text-bg-success">
    <div class="container">
      <div class="text-center p-3">
        <h1>{{ auction.product.products_name }} Auction Details</h1>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 p-5">
      <!-- <h2>{{ auction.product.products_name }} Auction Details</h2> -->
      <img
        src="../../media/{{auction.product.product_image }}"
        alt="{{ auction.product.products_name }} Image"
        class="img-fluid mb-3 w-100"
      />
    </div>
    <div class="col-md-6 my-5 mx-0 px-0">
      <div class="text-center m-3">
        <h3 class="">Place Your Own Bid</h3>
        <form method="post" action="{% url 'bid' auction_id=auction.id %}">
          {% csrf_token %} {{ form.as_p }}
          <button type="submit" class="btn btn-primary rounded-pill">
            Place Bid
          </button>
        </form>
      </div>
      <div class="d-flex justify-content-evenly">
        <div
          class="fw-bold my-2 p-2 rounded-3"
          style="font-size: 15px; background: rgb(175, 248, 175)"
        >
          Start Time: {{ auction.start_time }}
        </div>
        <div
          class="fw-bold my-2 p-2 rounded-3"
          style="font-size: 15px; background: rgb(245, 164, 164)"
        >
          End Time: {{ auction.end_time }}
        </div>
      </div>

      <h3>Bids:</h3>
      {% if bids %}
      <div class="table-responsive" style="max-height: 400px">
        <table class="table">
          <thead class="sticky-top text-bg-light border-bottom">
            <tr>
              <th scope="col">Bidder Name</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            {% for bid in bids reversed %}
            <tr>
              <td>{{ bid.user.username }}</td>
              <td>{{ bid.bid_amount }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p>No bids yet.</p>
      {% endif %}
      </div>
  </div>
</div>
{% endblock %}
